<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Developer Workflow Using Local</title>
<meta name="author" content="(Benjamin Turner)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/reveal.css"/>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/theme/none.css" id="theme"/>

<link rel="stylesheet" href="assets/styles.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">

<section>
<section id="slide-title" data-background-size="1400px">
<h2 id="title"><a id="orgdec39af"></a>Developer Workflow Using Local</h2>
<ul>
<li>Benjamin Turner</li>
<li><a href="https://passionsplay.com">https://passionsplay.com</a></li>
<li><a href="https://github.com/bgturner">https://github.com/bgturner</a></li>

</ul>

</section>
</section>
<section>
<section id="slide-org8b48864" data-background-size="1400px">
<h2 id="org8b48864">What is Local?</h2>
<div class="outline-text-2" id="text-org8b48864">
</div>
</section>
<section id="slide-org8e78025" data-background-size="1400px">
<h3 id="org8e78025"></h3>
<p>
A tool for managing WordPress sites on your local computer.
</p>

</section>
</section>
<section>
<section id="slide-orgad5c84d" data-background-size="1400px">
<h2 id="orgad5c84d">Create New Site</h2>
<div class="outline-text-2" id="text-orgad5c84d">
</div>
</section>
<section id="slide-org4854bb8" data-background="assets/images/create-new-site-01.png" data-background-size="1400px">
<h3 id="org4854bb8"></h3>

</section>
<section id="slide-org6a8ae78" data-background="assets/images/create-new-site-02.png" data-background-size="1400px">
<h3 id="org6a8ae78"></h3>

</section>
<section id="slide-orgef66d35" data-background="assets/images/create-new-site-03.png" data-background-size="1400px">
<h3 id="orgef66d35"></h3>

</section>
<section id="slide-org42995c1" data-background="assets/images/create-new-site-04.png" data-background-size="1400px">
<h3 id="org42995c1"></h3>

</section>
<section id="slide-org58d717d" data-background="assets/images/create-new-site-05.png" data-background-size="1400px">
<h3 id="org58d717d"></h3>

</section>
<section id="slide-org08a9dac" data-background="assets/images/create-new-site-06.png" data-background-size="1400px">
<h3 id="org08a9dac"></h3>

</section>
<section id="slide-org91d61ee" data-background="assets/images/create-new-site-07.png" data-background-size="1400px">
<h3 id="org91d61ee"></h3>

</section>
<section id="slide-orgceb5cff" data-background-size="1400px">
<h3 id="orgceb5cff">Blueprints</h3>
<p>
Create a site from a snapshot
</p>

</section>
<section id="slide-orgdffe382" data-background="assets/images/create-from-blueprint.png" data-background-size="1400px">
<h4 id="orgdffe382"></h4>

</section>
</section>
<section>
<section id="slide-orgb25d1b0" data-background-size="1400px">
<h2 id="orgb25d1b0">Export Site</h2>
<div class="outline-text-2" id="text-orgb25d1b0">
</div>
</section>
<section id="slide-org7b5a4d4" data-background="assets/images/export-01.png" data-background-size="1400px">
<h3 id="org7b5a4d4"></h3>

</section>
<section id="slide-orgbe4718f" data-background="assets/images/export-02.png" data-background-size="1400px">
<h3 id="orgbe4718f"></h3>

</section>
<section id="slide-orgf05d31b" data-background="assets/images/export-03.png" data-background-size="1400px">
<h3 id="orgf05d31b"></h3>

</section>
</section>
<section>
<section id="slide-org6cc02d2" data-background-size="1400px">
<h2 id="org6cc02d2">Push/Pull to Flywheel</h2>
<div class="outline-text-2" id="text-org6cc02d2">
</div>
</section>
<section id="slide-org51d6fb3" data-background="assets/images/connect-push-01.png" data-background-size="1400px">
<h3 id="org51d6fb3"></h3>

</section>
<section id="slide-org4282984" data-background="assets/images/connect-push-02.png" data-background-size="1400px">
<h3 id="org4282984"></h3>

</section>
</section>
<section>
<section id="slide-im-a-developer" data-background="assets/images/terminal-wall-of-text.png" data-background-size="3000px">
<h2 id="im-a-developer"><a id="orgeb1c84f"></a>But I'm a "Developer"</h2>
<p>
Where's the black screen and cryptic terminal commands?
</p>

</section>
<section id="slide-org963c930" data-background-size="1400px">
<h3 id="org963c930">They're Here!</h3>
<div class="outline-text-3" id="text-org963c930">
</div>
</section>
<section id="slide-orga85e518" data-background="assets/images/open-site-ssh.png" data-background-size="1400px">
<h4 id="orga85e518"></h4>

</section>
<section id="slide-orgeed888c" data-background="assets/images/open-site-ssh-02.png" data-background-size="1400px">
<h4 id="orgeed888c"></h4>

</section>
<section id="slide-org2261f1a" data-background-size="1400px">
<h3 id="org2261f1a">Cool, but&#x2026;</h3>
<ul>
<li>That's no different than what I'm already doing</li>
<li>It's only for one site</li>

</ul>

</section>
</section>
<section>
<section id="slide-org588fff1" data-background-size="1400px">
<h2 id="org588fff1">Local? Docker? Containers? Machines?</h2>
<div class="outline-text-2" id="text-org588fff1">
</div>
</section>
<section id="slide-orgc95be85" data-background-size="1400px">
<h3 id="orgc95be85">What <i>really</i> is Local?</h3>
<ul>
<li>Is an Electron app</li>
<li>Coordinates Docker Containers</li>
<li>Is focused on managing WordPress sites</li>

</ul>

</section>
<section id="slide-local-parts-01" data-background="assets/images/local-parts-01.jpeg" data-background-size="1400px">
<h3 id="local-parts-01"><a id="orgfd181a3"></a>Think of Local as&#x2026;</h3>
<p>
A Producer
</p>

<p>
Local doesn't do much directly, it delegates a lot of the details
</p>

<p>
We tell Local to "Create a Site" and Local lines up the talent to make it happen.
</p>

</section>
<section id="slide-local-parts-02" data-background="assets/images/local-parts-02.jpeg" data-background-size="1400px">
<h3 id="local-parts-02"><a id="org37bb905"></a>WordPress</h3>
<p>
Is a star actor, but has "specific" needs.
</p>

<ul>
<li>PHP</li>
<li>MySQL</li>
<li>NGINX/Apache</li>
<li>Varnish</li>
<li>&#x2026;</li>

</ul>

</section>
<section id="slide-local-parts-03" data-background="assets/images/local-parts-03.jpeg" data-background-size="1400px">
<h3 id="local-parts-03"><a id="org578b25f"></a>Docker</h3>
<p>
Co-ordinates and runs each individual WordPress site.
</p>

<p>
Each site that Docker runs is called a <b>container</b>.
</p>

</section>
<section id="slide-local-parts-04" data-background="assets/images/local-parts-04.jpeg" data-background-size="1400px">
<h3 id="local-parts-04"><a id="org7670b6a"></a>Virtual Box</h3>
<p>
Creates the general environment for running Docker containers (local sites).
</p>

<p>
This environment is called a <b>Virtual Machine</b> (VM)
</p>

<p>
VirtualBox creates the VM for Local, and names is <code>local-by-flywheel</code>
</p>

</section>
<section id="slide-installing-local-01" data-background="assets/images/installing-local-01.jpeg" data-background-size="1400px">
<h3 id="installing-local-01"><a id="orga7f366f"></a>Installing Local</h3>
<ul>
<li>User downloads and installs Local</li>

</ul>

</section>
<section id="slide-installing-local-02" data-background="assets/images/installing-local-02.jpeg" data-background-size="1400px">
<h3 id="installing-local-02"><a id="orgf6f6430"></a>Installing Local</h3>
<ul>
<li>Local downloads &amp; installs VirtualBox</li>

</ul>

</section>
<section id="slide-installing-local-03" data-background="assets/images/installing-local-03.jpeg" data-background-size="1400px">
<h3 id="installing-local-03"><a id="org188ef0b"></a>Installing Local</h3>
<ul>
<li>Local has VB create a Virtual Machine</li>

</ul>

</section>
<section id="slide-installing-local-04" data-background="assets/images/installing-local-04.jpeg" data-background-size="1400px">
<h3 id="installing-local-04"><a id="org16a437e"></a>Installing Local</h3>
<ul>
<li>VB finishes creating the VM by installing Docker inside the VM</li>

</ul>

</section>
<section id="slide-creating-site-01" data-background="assets/images/local-creating-site-01.jpeg" data-background-size="1400px">
<h3 id="creating-site-01"><a id="orge8feff9"></a>Creating a Site</h3>
<ul>
<li>Local tells Docker to create a new WordPress site</li>

</ul>

</section>
<section id="slide-creating-site-01" data-background="assets/images/local-creating-site-02.jpeg" data-background-size="1400px">
<h3 id="creating-site-01"><a id="orgcb0b45f"></a>Creating a Site</h3>
<ul>
<li>Each new site is another container</li>

</ul>

</section>
</section>
<section>
<section id="slide-org2544c0b" data-background-size="1400px">
<h2 id="org2544c0b">Docker and Local</h2>
<p>
We can start dabbling with Docker using the version that comes bundled with Local.
</p>

<p>
To work with Local's WordPress sites, we need to set our context to be the the <code>local-by-flywheel</code> Virtual Machine.
</p>

</section>
<section id="slide-orgaade4f9" data-background-size="1400px">
<h4 id="orgaade4f9">How?</h4>

</section>
<section id="slide-org485d47f" data-background="assets/images/setup-docker-environment.png" data-background-size="1400px">
<h4 id="org485d47f"></h4>

</section>
</section>
<section>
<section id="slide-orgb92f733" data-background-size="1400px">
<h2 id="orgb92f733">Using Docker</h2>
<div class="outline-text-2" id="text-orgb92f733">
</div>
</section>
<section id="slide-orgd0da4a1" data-background-size="1400px">
<h3 id="orgd0da4a1">Listing Containers</h3>
<div class="org-src-container">

<pre  class="src src-shell">docker ps | less -S
</pre>
</div>

<ul>
<li><a href="https://docs.docker.com/engine/reference/commandline/ps/">https://docs.docker.com/engine/reference/commandline/ps/</a></li>

</ul>

</section>
<section id="slide-orgd84183a" data-background="assets/images/docker-ps.png" data-background-size="1400px">
<h4 id="orgd84183a"></h4>

</section>
<section id="slide-org25423dc" data-background-size="1400px">
<h3 id="org25423dc">Inspecting Containers</h3>
<div class="org-src-container">

<pre  class="src src-shell">docker inspect &lt;container-id&gt;
</pre>
</div>

<ul>
<li><a href="https://docs.docker.com/engine/reference/commandline/inspect/">https://docs.docker.com/engine/reference/commandline/inspect/</a></li>

</ul>

</section>
<section id="slide-orga9454bd" data-background="assets/images/docker-inspect.png" data-background-size="1400px">
<h4 id="orga9454bd"></h4>

</section>
</section>
<section>
<section id="slide-orgec35f17" data-background-size="1400px">
<h2 id="orgec35f17">So What</h2>
<div class="outline-text-2" id="text-orgec35f17">
</div>
</section>
<section id="slide-orgd3e8ca8" data-background-size="1400px">
<h3 id="orgd3e8ca8">WP-CLI</h3>
<p>
<code>wp-cli</code> allows us to operate on a remote system using the <code>--ssh</code> argument.
</p>

<p>
In this case, our Docker containers are "remote systems" from our laptop.
</p>

</section>
<section id="slide-org36101cd" data-background-size="1400px">
<h4 id="org36101cd">Docs:</h4>
<div class="org-src-container">

<pre  class="src src-shell">--ssh=<span style="color: #268bd2;">[</span>&lt;scheme&gt;:<span style="color: #268bd2;">][</span>&lt;user&gt;@<span style="color: #268bd2;">]</span>&lt;host|container&gt;<span style="color: #268bd2;">[</span>:&lt;port&gt;<span style="color: #268bd2;">][</span>&lt;path&gt;<span style="color: #268bd2;">]</span>
    Perform operation against a remote server over SSH
    <span style="color: #268bd2;">(</span>or a container using scheme of <span style="color: #2aa198;">"docker"</span>,
    <span style="color: #2aa198;">"docker-compose"</span>, <span style="color: #2aa198;">"vagrant"</span><span style="color: #268bd2;">)</span>.
</pre>
</div>

<ul>
<li><a href="https://make.wordpress.org/cli/handbook/running-commands-remotely/">https://make.wordpress.org/cli/handbook/running-commands-remotely/</a></li>

</ul>

</section>
</section>
<section>
<section id="slide-orgc52ac1a" data-background-size="1400px">
<h2 id="orgc52ac1a">Case Study</h2>
<p>
List the installed themes for all running sites.
</p>

</section>
<section id="slide-org7902284" data-background-size="1400px">
<h3 id="org7902284">Breaking It Down</h3>
<p>
We need to do two things:
</p>
<ul>
<li>Get a list of running WordPress containers</li>
<li>Do something within each container</li>

</ul>

</section>
<section id="slide-org2fb7d0b" data-background="assets/images/docker-ps-filter-wordpress-containers.png" data-background-size="1400px">
<h3 id="org2fb7d0b"></h3>

</section>
<section id="slide-org2c3c50c" data-background="assets/images/bash-loop-docker.png" data-background-size="1400px">
<h3 id="org2c3c50c"></h3>

</section>
<section id="slide-orgf3ef8c5" data-background="assets/images/bash-loop-docker-02.png" data-background-size="1400px">
<h3 id="orgf3ef8c5"></h3>
</section>
</section>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/lib/js/head.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'Fade', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
